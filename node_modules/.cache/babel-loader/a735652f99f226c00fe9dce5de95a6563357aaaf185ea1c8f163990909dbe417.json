{"ast":null,"code":"import _regeneratorRuntime from\"/home/alok/Downloads/TrndZaade/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/alok/Downloads/TrndZaade/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import axios from\"axios\";import{useState}from\"react\";// import \"./App.css\";\nvar initPayment=function initPayment(data,book){var options={key:\"rzp_test_wVqNyRVh1Gh4nm\",amount:data.amount,currency:data.currency,name:book.name,description:\"Test Transaction\",image:book.img,order_id:data.id,handler:function(){var _handler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(response){var verifyUrl,_yield$axios$post,_data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;verifyUrl=\"http://localhost:3000/api/payment/verify\";_context.next=4;return axios.post(verifyUrl,response);case 4:_yield$axios$post=_context.sent;_data=_yield$axios$post.data;console.log(_data);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));function handler(_x){return _handler.apply(this,arguments);}return handler;}(),theme:{color:\"#3399cc\"}};var rzp1=new window.Razorpay(options);rzp1.open();//         const rzp = new window.Razorpay();\n// rzp.createPayment(options);\n};var handlePayment=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(book){var orderUrl,_yield$axios$post2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;orderUrl=\"http://localhost:3000/api/payment/orders/pay\";_context2.next=4;return axios.post(orderUrl,{amount:book.price});case 4:_yield$axios$post2=_context2.sent;data=_yield$axios$post2.data;console.log(data);initPayment(data.data,book);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}},_callee2,null,[[0,10]]);}));return function handlePayment(_x2){return _ref.apply(this,arguments);};}();// return (\n// \t<div className=\"App\">\n// \t\t<div className=\"book_container\">\n// \t\t\t<img src={book.img} alt=\"book_img\" className=\"book_img\" />\n// \t\t\t<p className=\"book_name\">{book.name}</p>\n// \t\t\t<p className=\"book_author\">By {book.author}</p>\n// \t\t\t<p className=\"book_price\">\n// \t\t\t\tPrice : <span>&#x20B9; {book.price}</span>\n// \t\t\t</p>\n// \t\t\t<button onClick={handlePayment} className=\"buy_btn\">\n// \t\t\t\tbuy now\n// \t\t\t</button>\n// \t\t</div>\n// \t</div>\nexport default handlePayment;","map":{"version":3,"names":["axios","useState","initPayment","data","book","options","key","amount","currency","name","description","image","img","order_id","id","handler","response","verifyUrl","post","console","log","theme","color","rzp1","window","Razorpay","open","handlePayment","orderUrl","price"],"sources":["/home/alok/Downloads/TrndZaade/frontend/src/components/Payment.js"],"sourcesContent":["import axios from \"axios\";\nimport { useState } from \"react\";\n// import \"./App.css\";\n\n\n\n\tconst initPayment = (data, book) => {\n\t\tconst options = {\n\t\t\tkey: \"rzp_test_wVqNyRVh1Gh4nm\",\n\t\t\tamount: data.amount,\n\t\t\tcurrency: data.currency,\n\t\t\tname: book.name,\n\t\t\tdescription: \"Test Transaction\",\n\t\t\timage: book.img,\n\t\t\torder_id: data.id,\n\t\t\thandler: async (response) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst verifyUrl = \"http://localhost:3000/api/payment/verify\";\n\t\t\t\t\tconst { data } = await axios.post(verifyUrl, response);\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\t\t\t},\n\t\t\ttheme: {\n\t\t\t\tcolor: \"#3399cc\",\n\t\t\t},\n\t\t};\n\t\tconst rzp1 = new window.Razorpay(options);\n\t\trzp1.open();\n//         const rzp = new window.Razorpay();\n// rzp.createPayment(options);\n\t};\n\n\tconst handlePayment = async (book) => {\n\t\ttry {\n\t\t\tconst orderUrl = \"http://localhost:3000/api/payment/orders/pay\";\n\t\t\tconst { data } = await axios.post(orderUrl, { amount: book.price });\n\t\t\tconsole.log(data);\n\t\t\tinitPayment(data.data, book);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\t// return (\n\t// \t<div className=\"App\">\n\t// \t\t<div className=\"book_container\">\n\t// \t\t\t<img src={book.img} alt=\"book_img\" className=\"book_img\" />\n\t// \t\t\t<p className=\"book_name\">{book.name}</p>\n\t// \t\t\t<p className=\"book_author\">By {book.author}</p>\n\t// \t\t\t<p className=\"book_price\">\n\t// \t\t\t\tPrice : <span>&#x20B9; {book.price}</span>\n\t// \t\t\t</p>\n\t// \t\t\t<button onClick={handlePayment} className=\"buy_btn\">\n\t// \t\t\t\tbuy now\n\t// \t\t\t</button>\n\t// \t\t</div>\n\t// \t</div>\n\nexport default handlePayment;"],"mappings":"0QAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,OAAO,CAChC;AAIC,GAAMC,YAAW,CAAG,QAAdA,YAAW,CAAIC,IAAI,CAAEC,IAAI,CAAK,CACnC,GAAMC,QAAO,CAAG,CACfC,GAAG,CAAE,yBAAyB,CAC9BC,MAAM,CAAEJ,IAAI,CAACI,MAAM,CACnBC,QAAQ,CAAEL,IAAI,CAACK,QAAQ,CACvBC,IAAI,CAAEL,IAAI,CAACK,IAAI,CACfC,WAAW,CAAE,kBAAkB,CAC/BC,KAAK,CAAEP,IAAI,CAACQ,GAAG,CACfC,QAAQ,CAAEV,IAAI,CAACW,EAAE,CACjBC,OAAO,mFAAE,iBAAOC,QAAQ,yKAEhBC,SAAS,CAAG,0CAA0C,uBACrCjB,MAAK,CAACkB,IAAI,CAACD,SAAS,CAAED,QAAQ,CAAC,wCAA9Cb,KAAI,mBAAJA,IAAI,CACZgB,OAAO,CAACC,GAAG,CAACjB,KAAI,CAAC,CAAC,+EAElBgB,OAAO,CAACC,GAAG,aAAO,CAAC,mEAEpB,kFACDC,KAAK,CAAE,CACNC,KAAK,CAAE,SACR,CACD,CAAC,CACD,GAAMC,KAAI,CAAG,GAAIC,OAAM,CAACC,QAAQ,CAACpB,OAAO,CAAC,CACzCkB,IAAI,CAACG,IAAI,EAAE,CACb;AACA;AACC,CAAC,CAED,GAAMC,cAAa,4FAAG,kBAAOvB,IAAI,6KAEzBwB,QAAQ,CAAG,8CAA8C,wBACxC5B,MAAK,CAACkB,IAAI,CAACU,QAAQ,CAAE,CAAErB,MAAM,CAAEH,IAAI,CAACyB,KAAM,CAAC,CAAC,0CAA3D1B,IAAI,oBAAJA,IAAI,CACZgB,OAAO,CAACC,GAAG,CAACjB,IAAI,CAAC,CACjBD,WAAW,CAACC,IAAI,CAACA,IAAI,CAAEC,IAAI,CAAC,CAAC,qFAE7Be,OAAO,CAACC,GAAG,cAAO,CAAC,sEAEpB,kBATKO,cAAa,6CASlB,CAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAED,cAAeA,cAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}